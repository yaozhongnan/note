# 第三章 - 基本概念

## 语法

+ ECMAScript 中的一切（变量、函数、操作符）都区分大小写。
+ 标识符是指变量、函数、属性的名字，或者函数的参数。



## 数据类型

+ ECMAScript 中有五种简单数据类型（也称为基本数据类型）：Undefined, Null, Boolean, Number, String。
+ 一种复杂数据类型：Object。Object 本质上是由一组无序的名值对组成。



## undefined

+ 声明的变量未经初始化则它的值默认就会取得 undefined 值。
+ 一般而言，不存在需要显示的把一个变量设置成 undefined 的情况。
+ 但包含 undefined 的值的变量与尚未定义的变量还是不一样的。

```js
var message; // 这个变量声明之后默认取得了 undefined 值 
 
// 下面这个变量并没有声明 
// var age 
 
alert(message);     // "undefined" 
alert(age);         // 产生错误 age is not defined
```

```js
var message; // 这个变量声明之后默认取得了 undefined 值 
 
// 下面这个变量并没有声明 
// var age 
 
alert(typeof message);     // "undefined" 
alert(typeof age);         // "undefined"
```

即便未初始化的变量会自动被赋予 undefined 值，但显式地初始化变量依然是明智的选择。

如果能够做到这一点，那么当 typeof 操作符返回 undefined 值时，我们就知道被检测的变量还没有被声明，而不是尚未初始化。



## Null

+ 从逻辑角度来看，null 值表示一个空对象指针，而这也正是使用 typeof null 返回 object 的原因。
+ 如果定义的变量准备在将来用于保存对象，那么最好将该变量初始化为 null 而不是其他值。
+ 因为这样你只需要检测一个变量是否为 null 就可以知道该变量是否已经保存了一个对象的引用。
+ console.log(null == undefined) 返回 true，这个操作符出于比较的目的会转换其操作数。
+ 只要意在保存对象的变量还没有真正保存对象，就应该明确地让该变量保存 null 值。



## Number

+ Number 类型使用 IEEE754 格式来表示整数和浮点数值。
+ 浮点数值，就是该数值中必须包含一个小数点，并且小数点后面必须至少有一位数字。
+ 保存浮点数值需要的内存空间是保存整数值的两倍，因此 ECMAScript 会不失时机地将浮点数值转为整数值。
+ 浮点数值的最高精度是17 位小数，但在进行算术计算时其精确度远远不如整数。

```js
if (a + b == 0.3){          // 不要做这样的测试！ 
    alert("You got 0.3."); 
}
```

关于浮点数值计算会产生舍入误差的问题，有一点需要明确：这是使用基于 IEEE754 数值的浮点计算的通病。

ECMAScript 并非独此一家，其他使用相同数值格式的语言也存在这个问题。



## NaN

+ NaN，即非数值（Not a Number）是一个特殊的数值，这个数值用于表示一个本来要返回数值的操作数
  未返回数值的情况（这样就不会抛出错误了）。
+ 任何涉及 NaN 的操作（例如NaN/10）都会返回 NaN。
+ 其次，NaN 与任何值都不相等，包括 NaN 本身。



## String

+ String 类型用于表示由零或多个16 位 Unicode 字符组成的字符序列，即字符串。
+ 转义字符可以出现在字符串中的任意位置，而且也将被作为一个字符来解析，即 length 为 1。
+ ECMAScript 中的字符串是不可变的，也就是说，字符串一旦创建，它们的值就不能改变。
+ 要改变某个变量保存的字符串，首先要销毁原来的字符串，然后再用另一个包含新值的字符串填充该变量。
+ null 和 undefined 没有 toString() 方法，但可以使用 String() 方法转化为字符串。



## 一元操作符

+ 一元操作符包括递增操作符（++）、递减操作符（--）、一元加操作符（+）、一元减操作符（-）
+ 通常我们使用这些操作符都用于操作数值，然而它们也可以操作非数值类型。
+ 一般操作非数值类型的做法是将非数值类型先转换为数值类型，然后再操作，具体见 36 页。



## 位操作符

+ 位操作符用于在最基本的层次上，即按内存中表示数值的位来操作数值。
+ ECMAScript 中的所有数值都以 IEEE-754 64 位格式存储，但位操作符并不直接操作 64 位的值。
+ 而是先将 64 位的值转换成 32 位的整数，然后执行操作，最后再将结果转换回 64 位。
+ 对于开发人员来说，由于 64 位存储格式是透明的，因此整个过程就像是只存在 32 位的整数一样。
+ 对于有符号的整数，32 位中的前 31 位用于表示整数的值。第 32 位用于表示数值的符号，0 为正 1 为负。
+ 这个表示符号的位叫做符号位，符号位的值决定了其他位数值的格式。
+ 按位非（~）操作符的结果是返回数值的反码

+ 按位与（&）操作符
+ 按位或（|）操作符
+ 按位异或（^）操作符
+ 左移（<<）操作符
+ 有符号右移（>>）操作符
+ 无符号右移（>>>）操作符
+ 具体见 39 页



## 语句

+ do-while 语句是一种后测试循环语句，即只有在循环体中的代码执行之后，才会测试出口条件。

```js
var i = 0; 
do { 
   i += 2; 		// 循环体内代码至少被执行一次
} while (i < 10); 
 
alert(i);
```

+ while 语句属于前测试循环语句，也就是说，在循环体内的代码被执行之前，就会对出口条件求值。

```js
var i = 0; 
while (i < 10) { 	// 先判断出口条件，在执行循环体内代码
    i += 2
}
```

+ for in 可以用来枚举对象的属性（包含原型上的）



## 理解函数参数

+ ECMAScript 函数不介意传递进来多少个参数，也不在乎传进来参数是什么数据类型。
+ 因为在函数体内可以通过 arguments 对象来访问这个参数数组，从而获取传递给函数的每一个参数。
+ ECMAScript 函数的一个重要特点：命名的参数只提供便利，但不是必需的。
+ 访问 arguments 对象的 length 属性可以获知有多少个参数传递给了函数。
+ arguments 对象可以与命名参数一起使用。

```js
function doAdd(num1, num2) { 
    if(arguments.length == 1) { 
       alert(num1 + 10); 
    } else if (arguments.length == 2) { 
        // 这里通过 arguments[0] 代替命名参数 num1
        alert(arguments[0] + num2); 
    } 
}
```

+ arguments 的值永远与对应命名参数的值保持同步。

```js
function doAdd(num1, num2) { 
    // 每次执行这个 doAdd() 函数都会重写第二个参数，将第二个参数的值修改为 10。
    // 因为 arguments 对象中的值会自动反映到对应的命名参数，所以修改 arguments[1]，也就修改了 num2，结果它们的值都会变成 10。
    // 不过，这并不是说读取这两个值会访问相同的内存空间；它们的内存空间是独立的，但它们的值会同步。
    arguments[1] = 10;     
    alert(arguments[0] + num2); 
} 
```

+ 没有传递值的命名参数将自动被赋予 undefined 值。这就跟定义了变量但又没有初始化一样。
+ ECMAScript 中的所有参数传递的都是值，不可能通过引用传递参数。 



## 没有重载

+ ECMAScript 函数不能像传统意义上那样实现重载。
+ 其他语言中，可以为一个函数编写两个定义，只要这两个定义的签名（接受的参数的类型和数量）不同即可。
+ ECMAScirpt 函数没有签名，因为其参数是由包含零或多个值的数组来表示的。
+ 而没有函数签名，真正的重载是不可能做到的。
+ 但通过检查传入函数中参数的类型和数量并作出不同的反应，可以模仿方法的重载。



## 小结

+ JavaScript 的核心语言特性在 ECMA-262 中是以名为 ECMAScript 的伪语言的形式来定义的。
+ ECMAScript 中包含了所有基本的语法、操作符、数据类型以及完成基本的计算任务所必需的对象。
+ 理解 ECMAScript 及其纷繁复杂的各种细节，是理解其在 Web 浏览器中的实现 —— JavaScript 的关键。
+ ECMAScript 中也有一种复杂的数据类型，即 Object 类型，该类型是这门语言中所有对象的基础类型。
+ ECMAScript 中也没有函数签名的概念，因为其函数参数是以一个包含零或多个值的数组的形式传递的。
+ 由于不存在函数签名的特性，ECMAScript 函数不能重载。 